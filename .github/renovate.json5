{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["github>bitwarden/renovate-config:non-pinned"],
  "separateMajorMinor": true,
  "enabledManagers": [
    "cargo",
    "dockerfile",
    "github-actions",
    "npm",
    "nuget",
    "custom.regex"
  ],
  "regexManagers": [
    {
      "fileMatch": ["^\\.github/workflows/.*\\.ya?ml$"],
      "matchStrings": [
        "cargo install (?<depName>cargo-dylint) (?:[\\w-]+ )?--version (?<currentValue>\\d+\\.\\d+\\.\\d+) --locked",
        "cargo install (?<depName>dylint-link) (?:[\\w-]+ )?--version (?<currentValue>\\d+\\.\\d+\\.\\d+) --locked"
      ],
      "datasourceTemplate": "cargo",
      "versioningTemplate": "cargo"
    }
  ],
  "packageRules": [
    // ------------------------- Pull request groups -------------------------
    {
      "groupName": "rust",
      "matchManagers": ["custom.regex", "dockerfile"],
      "matchDepNames": ["rust"]
    },
    {
      "groupName": "dockerfile minor",
      "matchManagers": ["dockerfile"],
      "matchUpdateTypes": ["minor", "patch"]
    },
    {
      "groupName": "gh minor",
      "matchManagers": ["github-actions"],
      "matchUpdateTypes": ["minor", "patch"]
    },
    {
      "matchManagers": ["custom.regex"],
      "matchDepNames": ["rust", "rust-nightly"],
      "commitMessageTopic": "Rust"
    },
    {
      "matchManagers": ["cargo"],
      "groupName": "passkey-rs crates",
      "matchPackageNames": ["passkey", "passkey-client"],
    },
    {
      "groupName": "dylint (crates + actions)",
      "matchManagers": ["cargo", "custom.regex"],
      "matchPackageNames": ["dylint_linting", "dylint_testing", "cargo-dylint", "dylint-link"],
    },
    {
      "matchManagers": ["cargo"],
      "groupName": "wasm-bindgen group",
      "matchPackageNames": ["/wasm-bindgen*/"]
    },

    // ------------------------- Team review assignment -------------------------
    {
      "matchPackageNames": [
        "passkey",
        "passkey-client"
      ],
      "commitMessagePrefix": "[deps] Autofill:",
      "reviewers": ["team:team-autofill-dev"]
    },
    {
      "matchManagers": ["cargo"],
      "matchPackageNames": [
        "async-trait",
        "cargo-dylint",
        "chrono",
        "data-encoding",
        "dylint-link",
        "dylint_linting",
        "dylint_testing",
        "ed25519-dalek",
        "futures",
        "js-sys",
        "proc-macro2",
        "quote",
        "rand",
        "reqwest",
        "rsa",
        "schemars",
        "serde",
        "serde-wasm-bindgen",
        "serde_bytes",
        "serde_json",
        "serde_qs",
        "serde_repr",
        "sha1",
        "subtle",
        "syn",
        "thiserror",
        "tokio",
        "tracing",
        "tracing-subscriber",
        "tsify",
        "uniffi",
        "uniffi_core",
        "uniffi_macros",
        "uniffi_internal_macros",
        "uniffi_bindgen",
        "uniffi_build",
        "uuid",
        "validator",
        "wasm-bindgen",
        "wasm-bindgen-cli",
        "wasm-bindgen-futures",
        "wasm-bindgen-test",
        "wiremock",
        "zxcvbn"
      ],
      "commitMessagePrefix": "[deps] Platform (cargo):",
      "reviewers": ["team:team-platform-dev"]
    },
    {
      "matchManagers": ["npm"],
      "matchPackageNames": [
        "@iarna/toml",
        "@openapitools/openapi-generator-cli",
        "@types/node",
        "glob",
        "husky",
        "json5",
        "lint-staged",
        "prettier"
      ],
      "commitMessagePrefix": "[deps] Platform (npm):",
      "reviewers": ["team:team-platform-dev"]
    },
  ],
  "ignoreDeps": ["dotnet-sdk"]
}
